KDL::DipMaker
  #stage
    sets @dip_directory to the directory name of the AIP directory if no other name is provided
    accepts a DIP id provided in the options
    copies the AIP to the DIPs directory
    opens the METS file in place
  #generate_tiles
    does not attempt to tile non-TIFF files
    create tiles files and removes master files if the METS file is loaded
    removes tiff images from the METS file
    updates the METS file with tile files (removing master representations) if the METS file is loaded
    updates removing tiff image representations if the METS file is loaded
    outputs an error message if the METS file is not loaded
    outputs an error message if no tiler object is provided
  #cleanup
    removes unreferenced JP2 files
  #build
    stages construction of the DIP
    produces tiles for each master file
    outputs the location of the DIP on success
    calls #cleanup once finished
    outputs the usage note when the AIP directory is omitted
    outputs the usage note when the DIPs directory is omitted
    skips the usage note when all arguments are provided
  #usage
    outputs a short usage note
KDL::Tiler
  #command
    sets the --input-directory option
    sets the --output-directory option
    sets the --no-move option
    sets the --delete option
    sets the --quiet option
    allows the --make-pdfs option
    allows the --no-pdfs option
    allows the --file option
    produces an entire command string
  #run
    when no explicit initialization is peformed
      sends an error message to output
      does not actually run the external tiler program
    when full initialization is performed
      actually runs the external tiler program
      does not send an error message to output
KDL::Page
  Export
    #save
      serializes page_fields to a JSON file in the specified directory
    #page_type
      delegates to METS
    #page_fields
      creates a hash of fields common to all pages
      includes all solr_doc fields for all pages
      includes a breadcrumb trail in title_display when possible
      includes a restricted set of fields for finding aid pages
  Page-specific metadata
    label_display
      delegates to METS
    sequence_number_display
      delegates to METS
    text_href
      delegates to METS
    #browse_key_sort
      includes the first letter of the title, the sequence number, and the stopworded title
    #parent_id_s
      strikes the last _d+ group from the identifier
    #pdf_url_display
      partially delegates to METS
    #reference_image_url_s
      partially delegates to METS
    #thumbnail_url_s
      partially delegates to METS
    #front_thumbnail_url_s
      partially delegates to METS
    #viewer_url_s
      partially delegates to METS
    #page_identifier
      partially delegates to METS
    #sequence_sort
      is a zero-padded version of sequence_number_display
    #id
      constructs an identifier for an individual page
      uses the parent id for a finding aid
    #text
      retrieves the text from the DIP directory
    #text_s
      delegates to text
    ALTO
      #alto
        delegates to METS
      #coordinates_hash
        extracts a hash with words as keys and coordinates as values
      #resolution
        partially delegates to METS
      #coordinates_s
        dumps #coordinates_hash into JSON
KDL::MetsFixer
  loads a METS file
  #has_bad_file_ids
    detects problems with files in a mets:fileGrp
    does not detect problems where they do not exist
  #fix
    repairs bad ids in the indicated fileGrp
    marks the METS file as changed if it makes a change
  #fix_all
    repairs all ids
    saves the fixed METS file
KDL::AccessPackage
  Dublin Core access
    dc_contributor
      returns a list of all <dc:contributor> elements from input
    dc_coverage
      returns a list of all <dc:coverage> elements from input
    dc_creator
      returns a list of all <dc:creator> elements from input
    dc_date
      returns a list of all <dc:date> elements from input
    dc_description
      returns a list of all <dc:description> elements from input
    dc_format
      returns a list of all <dc:format> elements from input
    dc_identifier
      returns a list of all <dc:identifier> elements from input
    dc_language
      returns a list of all <dc:language> elements from input
    dc_publisher
      returns a list of all <dc:publisher> elements from input
    dc_relation
      returns a list of all <dc:relation> elements from input
    dc_rights
      returns a list of all <dc:rights> elements from input
    dc_source
      returns a list of all <dc:source> elements from input
    dc_subject
      returns a list of all <dc:subject> elements from input
    dc_title
      returns a list of all <dc:title> elements from input
    dc_type
      returns a list of all <dc:type> elements from input
  METS file access
    #repository
      delegates to the METS object
    #date_digitized
      delegates to the METS object
    #ids
      delegates to the METS object
    #pages
      returns an array of Page objects
  package information
    #identifier
      returns the package identifier for the DIP
    oral history fields
      #hasOralHistory
        partially delegates to METS
      #sync_xml
        partially delegates to METS
      #synchronization_url
        partially delegates to METS
      #reference_audio_url
        partially delegates to METS
    finding aid fields
      #pages
        includes a page for the finding aid
        does not mark other pages as finding aids
      #isFindingAid
        checks whether a specific item corresponds to a finding aid
      #hasFindingAid
        partially delegates to METS
      #hasDigitizedContent
        partially delegates to METS
        returns true if METS has at least 2 ids
        returns false if METS has less than 2 ids
      #finding_aid_url
        partially delegates to METS
      #finding_aid_text
        partially delegates to METS
KDL::SolrMaker
  command-line interface
    #help
      outputs a short usage note
  METS header fields
    #repository_s
      delegates to AccessPackage
    #date_digitized_display
      delegates to AccessPackage
  Oral history fields
    when an oral history is present
      #solr_doc
        includes synchronization_url_s
        includes reference_audio_url_s
        includes text and text_s
      #sync_xml
        delegates to AccessPackage
      #oral_history_text
        pulls text from the synchronization XML file
  Finding aid fields
    #solr_doc
      when a finding aid is present
        includes finding_aid_url_s
        sets :digital_content_available_s to true if digitized content is available
        sets :digital_content_available_s to false if digitized content is not available
      when a finding aid is not present
        does not include finding_aid_url_s
  Dublin Core fields
    fetching
      delegates fetching <dc:contributor> to AccessPackage
      delegates fetching <dc:coverage> to AccessPackage
      delegates fetching <dc:creator> to AccessPackage
      delegates fetching <dc:date> to AccessPackage
      delegates fetching <dc:description> to AccessPackage
      delegates fetching <dc:format> to AccessPackage
      delegates fetching <dc:identifier> to AccessPackage
      delegates fetching <dc:language> to AccessPackage
      delegates fetching <dc:publisher> to AccessPackage
      delegates fetching <dc:relation> to AccessPackage
      delegates fetching <dc:rights> to AccessPackage
      delegates fetching <dc:source> to AccessPackage
      delegates fetching <dc:subject> to AccessPackage
      delegates fetching <dc:title> to AccessPackage
      delegates fetching <dc:type> to AccessPackage
    KDL Solr fields with only one occurrence allowed
      #title_t
        delegates fetching title_t to AccessPackage
      #title_display
        delegates fetching title_display to AccessPackage
      #title_sort
        delegates fetching title_sort to AccessPackage
      #publisher_t
        delegates fetching publisher_t to AccessPackage
      #publisher_display
        delegates fetching publisher_display to AccessPackage
      #format
        delegates fetching format to AccessPackage
      #description_t
        delegates fetching description_t to AccessPackage
      #description_display
        delegates fetching description_display to AccessPackage
      #type_display
        delegates fetching type_display to AccessPackage
      #usage_display
        delegates fetching usage_display to AccessPackage
      #language_display
        delegates fetching language_display to AccessPackage
      #relation_display
        delegates fetching relation_display to AccessPackage
      #coverage_s
        delegates fetching coverage_s to AccessPackage
      #source_s
        delegates fetching source_s to AccessPackage
      #contributor_s
        delegates fetching contributor_s to AccessPackage
      #title
        is a lowercased version of the title with initial stopwords removed
      #author_t
        is a period-separated list of dc:creator elements
      #author_display
        is the same as #author_t
      #pub_date
        partially delegates fetching pub_date to AccessPackage
      #full_date_s
        partially delegates fetching full_date_s to AccessPackage
        is empty if the date is not in YYYY-MM-DD format
    KDL Solr fields with multiple occurrences allowed
      #subject_topic_facet
        delegates to AccessPackage
  Export
    All objects
      #solr_doc
        creates a hash of fields common to all pages
      #pages
        delegates to AccessPackage
      #mets_url_display
        returns the location of the METS file
    Paged objects
      #build
        passes save to each page
    Unpaged objects
      #solr_doc
        sets the id field
        sets the unpaged field
      #identifier
        delegates to AccessPackage
      #build
        calls save
      #save
        serializes solr_doc to a JSON file in the Solr directory set during initialization
KDL::METS
  File operations
    #load
      loads a METS file into memory
    #save
      makes a backup copy
      does not change the METS file if nothing has changed
      marks the file as unchanged
  Package-level metadata
    #ids
      fetches the list of fileGrp identifiers
    #hasFileGrpWithUse
      essentially delegates to fileGrp
    #fileGrp
      returns the fileGrp for a given use
    #file
      returns the file for a given group and use
    #referenced?
      returns true if the argument is referenced as an xlink:href attribute in the METS file
    #href
      returns the file location for a given group and use
      returns the file location for a given fileGrp use and file use
    #mimetype
      returns the MIMETYPE for a given group and use
    #file_id
      returns the file ID for a given group and use
    #dublin_core
      retrieves the Dublin Core metadata from the document
    #repository
      returns the repository
    #date_digitized
      returns the date digitized
  Modification
    #add_file
      adds the right file to the correct fileGrp in the fileSec
      actually updates the METS file with the right file in the correct fileGrp
      adds a file to the correct div in the structMap
      marks the METS file as changed
    #remove_file
      removes a file from the correct fileGrp in the fileSec
      removes a file from the correct div in the structMap
      marks the METS file as changed
  item-level metadata
    #label_path
      returns the LABEL attributes of the mets:div for a given id and its eligible mets:div ancestors in descent order
    #order_path
      returns the ORDER attributes of the mets:div for a given id and its eligible mets:div ancestors in descent order
    #sequence_number
      returns the sequence number for a given id
    #label
      returns the label for a given id
    #page_type
      returns the type for a given id
    #text_href
      returns the text location for a given id
    #alto_href
      returns the ALTO location for a given id
    #reel_metadata_href
      returns the relative location of the reel metadata from NDNP reel metadata
    #print_image_path
      returns the relative location for the print image for a given id
    #reference_image_path
      returns the relative location for the reference image for a given id
    #thumbnail_path
      returns the relative location for the thumbnail image for a given id
    #viewer_path
      returns the relative location for the gmapviewer metadata file for a given id
KDL::AipMaker
  #build
    builds the AIP in the requested directory
    returns a valid Bag in the BagIt format
    returns a Bag whose data directory matches the contents of the SIP
    checks whether the checksums in the Bag match the contents of the SIP
    returns a Bag whose checksums match the contents of the SIP
    outputs the location of the AIP on success
    outputs the usage note when the directory for AIPs is omitted
    outputs the usage note when the identifier is omitted
    outputs the usage note when the SIP location is omitted
  #check_fixity
    checks internal fixity of the AIP and compares with the SIP
    outputs an error when SIP and AIP diverge
    outputs an error when AIP fails fixity check
  #usage
    outputs a short usage note
  #cleanup!
    clears out the AIP directory

Finished in 8.934106 seconds

206 examples, 0 failures
